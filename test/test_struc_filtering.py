import unittest
from datetime import date
from bson import ObjectId
from mongo.user_db import User, get_user, save_user
from BE.structural_filtering import filter_apartments, turn_user_to_user_model


class TestApartmentFiltering(unittest.TestCase):
    def setUp(self):
        self.user_data = {
            '_id': ObjectId('6677f439242205068f743a26'),
            'id': '188',
            'thread_id': '1',
            'full_name': 'John Doe',
            'phone_number': '+49123456789',
            'email': 'john.doe@example.com',
            'address': {
                'street': 'Sample Street',
                'house_number': 10,
                'zip_code': 10115,
                'city': 'Berlin',
                'country': 'Germany'
            },
            'date_of_birth': date(1990, 7, 15),
            'smoker': False,
            'employment_type': 'Part-time',
            'average_monthly_net_income': 2000,
            'languages': ['English', 'German', 'French'],
            'apartment_preferences': {
                'max_rent': 1500,
                'location': 'Berlin',
                'bezirk': ['Kreuzberg', 'Neuk√∂lln', 'Pankow'],
                'min_size': 10,
                'ready_to_move_in': '2023-11',
                'preferred_roommates_sex': 'Egal',
                'preferred_roommate_age': [20, 60],
                'preferred_roommate_num': 3,
                'smoking_ok': True
            },
            'additional_info': [
                'Looking for a vibrant community.',
                'Enjoy cooking and sharing meals.',
                'Passionate about photography.',
                'Need a pet-friendly environment.',
                'Prefer a room with lots of natural light.',
                'Freelancer working from home.',
                'Interested in cultural exchanges.',
                'Fluent in English, German, and French.',
                'Looking for a long-term stay.'
            ],
            'additional_info_embedding': [-0.02191958948969841, 0.0021451672073453665, -0.003171618329361081,
                                          0.024120774120092392, -0.021023297682404518, 0.011460662819445133,
                                          -0.015922347083687782, 0.01625186577439308, -0.02530704252421856,
                                          -0.004705528263002634, 0.004903239198029041, -0.03556166589260101,
                                          0.0451308898627758, -0.026031984016299248, -0.030922042205929756,
                                          0.06632553786039352, -0.01813671365380287, 0.02380443550646305,
                                          0.02021927200257778, 0.019243896007537842, 0.0328991562128067,
                                          -0.015236948616802692, -0.0856221616268158, 0.019481150433421135,
                                          0.014841525815427303, -0.02271043322980404, -0.04449821636080742,
                                          0.01109160203486681, 0.023857159540057182, -0.014485645107924938,
                                          -0.03163380175828934, -0.029551243409514427, -0.028048638254404068,
                                          0.007651425898075104, -0.022723615169525146, -0.0007953759632073343,
                                          -0.018835293129086494, -0.005502963438630104, -0.005170149728655815,
                                          0.003286949824541807, -0.04130847379565239, 0.0023264025803655386,
                                          0.09458506852388382, 0.04057035222649574, -0.021445082500576973,
                                          0.01612005941569805, -0.0293403510004282, 0.014195668511092663,
                                          0.02731051668524742, -0.01672637276351452, 0.005143788177520037,
                                          -0.012468990869820118, 0.020667416974902153, -0.01356299314647913,
                                          -0.014011138118803501, -0.03479718416929245, -0.02061469480395317,
                                          -0.006135639734566212, -0.002962373895570636, 0.07349586486816406,
                                          0.07180873304605484, -0.020917851477861404, 0.07460305094718933,
                                          0.03218739479780197, -0.03250373154878616, -0.000594781362451613,
                                          -0.009707623161375523, -0.006781496573239565, -0.020654236897826195,
                                          0.018914377316832542, 0.03582528233528137, -0.011388168670237064,
                                          0.011902217753231525, -0.00740099186077714, -0.03334730118513107,
                                          -0.026295598596334457, -0.009839430451393127, -0.027468685060739517,
                                          -0.053118426352739334, -0.03374272212386131, -0.06674732267856598,
                                          0.014643814414739609, -0.02497752383351326, 0.050587721168994904,
                                          -0.021300094202160835, -0.06516563147306442, 0.030605703592300415,
                                          -0.04046490415930748, -0.00244008656591177, 0.010564371943473816,
                                          0.030263004824519157, -0.005852253641933203, -0.014999695122241974,
                                          -0.008587258867919445, 0.03975314646959305, -0.026256056502461433,
                                          -0.009720804169774055, -0.0023857159540057182, -0.042046595364809036,
                                          0.0685926303267479, 0.02659875527024269, -0.05040319263935089,
                                          -0.01880893111228943, -0.035350773483514786, 0.03861960023641586,
                                          -0.025939717888832092, 0.017728110775351524, -0.007829366251826286,
                                          0.02615061029791832, -0.03972678259015083, -0.11715051531791687,
                                          -0.00460337707772851, 0.02048288658261299, -0.007901860401034355,
                                          -0.061369575560092926, -0.05203760415315628, -0.005035046953707933,
                                          -0.04386553913354874, 0.011849495582282543, -0.019626138731837273,
                                          -0.005443650297820568, 0.03896230086684227, 0.019744765013456345,
                                          -0.014696537517011166, 0.01796536333858967, -0.05103586986660957,
                                          -0.01789945922791958, -0.00733508775010705, -0.04041218385100365,
                                          -0.03303096070885658, 0.0014671823009848595, -0.02126055210828781,
                                          0.025939717888832092, -0.009331971406936646, -0.038935936987400055,
                                          -0.015289670787751675, 0.026717381551861763, 0.003153494792059064,
                                          -0.058575257658958435, 0.005980765912681818, 0.052327580749988556,
                                          0.014116584323346615, 0.01925707794725895, 0.056624505668878555,
                                          -0.03513988107442856, -0.01349708903580904, 0.0037729900795966387,
                                          0.02458210103213787, -0.03160744160413742, -0.008705886080861092,
                                          0.023764893412590027, -0.023250844329595566, -0.038408707827329636,
                                          0.013444365933537483, 0.0223150122910738, -0.008231379091739655,
                                          0.022525902837514877, 0.0311592947691679, -0.025860633701086044,
                                          -0.000733179273083806, -0.010544600896537304, -0.034322675317525864,
                                          0.007644835393875837, 0.007743691094219685, 0.026585575193166733,
                                          -0.002267089206725359, -0.04723981022834778, -0.011493614874780178,
                                          -0.015790538862347603, -0.022604988887906075, -0.0030793529003858566,
                                          -0.05319751054048538, -0.017319506034255028, 0.10006826370954514,
                                          0.04805701971054077, 0.008402728475630283, 0.04455093666911125,
                                          -0.022525902837514877, -0.025056608021259308, 0.004491340834647417,
                                          -0.037248801440000534, 0.03376908600330353, 0.011236590333282948,
                                          -0.027231432497501373, 0.0038520745001733303, -0.0012480523437261581,
                                          -0.046422604471445084, -0.027415962889790535, -0.042310211807489395,
                                          0.026190152391791344, 0.011632013134658337, 0.024819353595376015,
                                          0.0032226936891674995, -0.062213145196437836, 0.05251211300492287,
                                          -0.026506491005420685, 0.04162481054663658, -0.03102748841047287,
                                          -0.0018057628767564893, 0.010300757363438606, -0.019138449802994728,
                                          -0.00031386662158183753, -0.01749085634946823, -0.01307530514895916,
                                          0.0014572967775166035, 0.01776765286922455, 0.008639981970191002,
                                          0.05825892090797424, -0.0023115742951631546, -0.026822827756404877,
                                          0.037565141916275024, 0.036194343119859695, 0.022947687655687332,
                                          0.03909410908818245, -0.017649024724960327, -0.005361270625144243,
                                          0.02348809875547886, 0.01853213645517826, 0.025096150115132332,
                                          0.033531829714775085, -0.039911314845085144, -0.005493077915161848,
                                          0.048162464052438736, 0.003034867811948061, -0.03374272212386131,
                                          0.007104424759745598, 0.022802699357271194, -0.05195851996541023,
                                          0.017991725355386734, -0.03318913280963898, -0.036985188722610474,
                                          -0.025069788098335266, -0.04800429567694664, -0.07813549041748047,
                                          -0.003670839127153158, 0.044076431542634964, -0.028259530663490295,
                                          8.01657370175235e-05, -0.03345274552702904, 0.02380443550646305,
                                          -0.029155820608139038, -0.002847042167559266, 0.03875140845775604,
                                          0.017345868051052094, -0.0013452604180201888, -0.008396138437092304,
                                          -0.021748239174485207, -0.05332931876182556, -0.007526208646595478,
                                          -0.017200879752635956, -0.029261266812682152, 0.028075000271201134,
                                          0.019283438101410866, -0.011612242087721825, 0.028865844011306763,
                                          0.02484571561217308, -0.03540349751710892, 0.0030167445074766874,
                                          0.002588369883596897, -0.031238380819559097, 0.06395300477743149,
                                          0.03888321667909622, 0.03200286254286766, -0.025847453624010086,
                                          0.005796235054731369, 0.0022275468800216913, -0.03426995128393173,
                                          0.02003474161028862, -0.01092684268951416, -0.03927863761782646,
                                          -0.03102748841047287, -0.05651906132698059, 0.0037762850988656282,
                                          0.01717451773583889, -0.039252277463674545, 0.0040201288647949696,
                                          0.016739554703235626, -0.0414930060505867, 0.02296086773276329,
                                          -0.026967816054821014, -0.09126351773738861, 0.016634108498692513,
                                          0.02445029281079769, -0.006185067351907492, 0.008462042547762394,
                                          0.008046848699450493, 0.029313990846276283, -0.012976448982954025,
                                          0.026717381551861763, 0.014169307425618172, 0.03155471757054329,
                                          -0.05978788807988167, 0.024555739015340805, 0.0024845716543495655,
                                          -0.004672576207667589, -0.021234190091490746, 0.025544295087456703,
                                          -0.011651784181594849, 0.031844694167375565, 0.01612005941569805,
                                          -0.01613323949277401, -0.04136119782924652, 0.022328192368149757,
                                          0.0013510269345715642, -0.061685916036367416, -0.011506795883178711,
                                          -0.024806173518300056, 0.038725048303604126, 0.025082970038056374,
                                          -0.014182488434016705, -0.019533872604370117, -0.01671319268643856,
                                          0.0021385769359767437, -0.027099624276161194, -0.04262654855847359,
                                          0.04792521148920059, -0.011915398761630058, 0.054937370121479034,
                                          -0.008376367390155792, -0.052854809910058975, -0.015144682489335537,
                                          0.014208849519491196, 0.019467968493700027, -0.029709413647651672,
                                          -0.04402370750904083, -0.005588638596236706, 0.01755676046013832,
                                          -0.020733321085572243, -0.028180446475744247, -0.02056197077035904,
                                          0.034375399351119995, -0.04043854400515556, 0.005133902654051781,
                                          0.011335445567965508, -0.009813069365918636, -0.01965249888598919,
                                          -0.0183476060628891, 0.03023664280772209, 0.02327720634639263,
                                          0.02160325087606907, -0.034902628511190414, -0.04708164185285568,
                                          -0.020179729908704758, 0.028444061055779457, 0.04209931939840317,
                                          0.026203332468867302, 0.044920001178979874, 0.03500807657837868,
                                          -0.002176471520215273, 0.020654236897826195, 0.05820619687438011,
                                          0.004175002686679363, -0.04236293211579323, 0.04138755798339844,
                                          0.003565393155440688, -0.007433943450450897, 0.04431368410587311,
                                          0.009780117310583591, -0.06084234640002251, 0.03376908600330353,
                                          -0.026572393253445625, -0.019692042842507362, 0.006105982698500156,
                                          -0.019929295405745506, -0.020179729908704758, 0.0035917547065764666,
                                          -0.04502544552087784, -0.022908145561814308, -0.014301114715635777,
                                          -0.017200879752635956, 0.007196689955890179, 0.027626853436231613,
                                          0.014656995423138142, -0.013088486157357693, -0.019283438101410866,
                                          0.033848170191049576, 0.04246838018298149, -0.007256003562361002,
                                          0.038276899605989456, 0.004451798740774393, 0.06042056158185005,
                                          0.0371960811316967, -0.002990382956340909, -0.07465577125549316,
                                          -0.028180446475744247, 0.026915093883872032, -0.036326151341199875,
                                          -0.05035046860575676, -0.026190152391791344, 0.04333830997347832,
                                          -0.02783774584531784, -0.015263309702277184, -0.007143966853618622,
                                          0.02263134904205799, 0.03403269872069359, -0.0017464495031163096,
                                          0.021840505301952362, 0.00936492346227169, 0.011941760778427124,
                                          -0.04420823976397514, 0.008798151277005672, -0.039252277463674545,
                                          0.005611704662442207, 0.0044979313388466835, -0.0033182541374117136,
                                          0.008494993671774864, -0.031897418200969696, 0.01010963600128889,
                                          0.027231432497501373, -0.006241085473448038, -0.003087590914219618,
                                          -0.03616797924041748, 0.044129155576229095, 0.02770593948662281,
                                          -0.04249474033713341, -0.029419437050819397, -0.000999265699647367,
                                          0.014419741928577423, 0.03442812338471413, -0.0004147817671764642,
                                          0.022064577788114548, 0.020021561533212662, -0.024885257706046104,
                                          -0.00959558691829443, 0.03376908600330353, 0.004768136888742447,
                                          0.032292839139699936, -0.04792521148920059, -0.07739736884832382,
                                          0.015909167006611824, -0.04431368410587311, -0.002344526117667556,
                                          0.02133963629603386, -0.012950087897479534, -0.02796955406665802,
                                          -0.024173498153686523, -0.011684736236929893, -0.022156842052936554,
                                          0.005381041672080755, 0.010399612598121166, -0.011638603173196316,
                                          -0.008119342848658562, -0.021682335063815117, 0.0010379841551184654,
                                          -0.018321244046092033, 0.011262951418757439, 0.014037500135600567,
                                          0.06036784127354622, -0.02659875527024269, 0.017003169283270836,
                                          -0.006392664276063442, -0.024371208623051643, 0.022815879434347153,
                                          -0.03231920301914215, 0.0038751407992094755, -0.0015652141300961375,
                                          -0.0011763820657506585, 0.03803964704275131, 0.07006887346506119,
                                          0.02562337927520275, 0.05261755734682083, 0.04460366070270538,
                                          0.004336467012763023, -0.015039237216114998, 0.03622070327401161,
                                          0.0006512114778161049, -0.0611586831510067, 0.02180096134543419,
                                          -0.02628241665661335, -0.03368999809026718, 0.012462399899959564,
                                          0.01697680726647377, 0.01017554011195898, 0.030342089012265205,
                                          -0.03579891845583916, 0.016739554703235626, 0.018070809543132782,
                                          0.011869266629219055, -0.008343415334820747, -0.010775264352560043,
                                          -0.022460000589489937, 0.06300398707389832, -0.03624706715345383,
                                          0.03479718416929245, -0.04560539871454239, -0.020469706505537033,
                                          0.0018189436523243785, 0.002721825148910284, -0.03793420270085335,
                                          0.007710739504545927, 0.00145894440356642, 0.02757413126528263,
                                          0.0015586238587275147, -0.014208849519491196, 0.05048227682709694,
                                          -0.00011059473763452843, -0.03972678259015083, -0.05114131420850754,
                                          0.031581077724695206, 0.0265328511595726, -0.02340901456773281,
                                          -0.0047417753376066685, -0.022974049672484398, 0.00835659634321928,
                                          0.04312741756439209, 0.017385410144925117, -0.0034006338100880384,
                                          -0.019138449802994728, -0.023923063650727272, 0.011342036537826061,
                                          0.020509248599410057, -0.005156968720257282, 0.00616529630497098,
                                          0.007829366251826286, 0.024753451347351074, 0.011981302872300148,
                                          -0.01782037504017353, 0.023316748440265656, -0.06210769712924957,
                                          -0.007789823692291975, -0.005084474571049213, 0.02986758202314377,
                                          -0.002716882387176156, 0.009417646564543247, 0.01626504585146904,
                                          -0.017846737056970596, -0.006105982698500156, -0.024358028545975685,
                                          0.002477981150150299, -0.011645193211734295, 0.023580363020300865,
                                          0.022341372445225716, -0.04273199662566185, -0.020021561533212662,
                                          0.011572699062526226, -0.0428110808134079, -0.009681262075901031,
                                          -0.005908271763473749, -0.013866149820387363, -0.011921989731490612,
                                          0.005881910212337971, 0.005067998543381691, 0.041862066835165024,
                                          0.013108257204294205, 0.004794497974216938, 0.022618168964982033,
                                          -0.0029936779756098986, 0.009747165255248547, -0.012113110162317753,
                                          -0.025148872286081314, 0.0022226041182875633, -0.02894493006169796,
                                          0.004988914355635643, 0.02472708933055401, -0.0057336268946528435,
                                          0.00887723546475172, 0.0074734860099852085, -0.005071294028311968,
                                          -0.00044196704402565956, 0.020970575511455536, 0.007789823692291975,
                                          -0.03864596039056778, 0.0037894658744335175, -0.015236948616802692,
                                          -0.02236773446202278, -0.005727036390453577, 0.00028256233781576157,
                                          -0.03390089049935341, -0.032609179615974426, -0.044524576514959335,
                                          0.025860633701086044, -0.0634784996509552, 0.0003702967369463295,
                                          -0.006952845957130194, 0.011500204913318157, -0.013866149820387363,
                                          -0.013490498997271061, 0.006639803294092417, 0.010630276054143906,
                                          0.005542505998164415, -0.010729131288826466, -0.015553286299109459,
                                          -0.011019107885658741, -0.013477317988872528, 0.030552981421351433,
                                          -0.02451619692146778, -0.011796772480010986, 0.0010585790732875466,
                                          0.016555022448301315, -0.016423216089606285, 0.029155820608139038,
                                          0.017398592084646225, 0.01034688949584961, -0.015961889177560806,
                                          0.040095843374729156, 0.023198122158646584, -0.04526269808411598,
                                          0.027995916083455086, -0.05514826253056526, 0.00761188380420208,
                                          0.017873099073767662, 5.694496212527156e-05, -0.009470369666814804,
                                          -0.013589354231953621, -0.00230004102922976, 0.008547716774046421,
                                          -0.0017530398909002542, -0.0293403510004282, -0.03166016563773155,
                                          -0.009035404771566391, -0.00275642448104918, 0.014432922005653381,
                                          -0.011737458407878876, -0.014419741928577423, 0.017161337658762932,
                                          0.004738479852676392, -0.06295126676559448, 0.0002905943838413805,
                                          0.00380594190210104, -0.010023960843682289, -0.004237611312419176,
                                          0.0371960811316967, 0.0018634286243468523, 0.05989333242177963,
                                          0.025003883987665176, 0.023580363020300865, 0.009114488959312439,
                                          -0.013154389336705208, -0.011295903474092484, -0.003359443973749876,
                                          -0.004435322713106871, 0.02068059891462326, 0.027890469878911972,
                                          -0.013371871784329414, -0.029893944039940834, 0.019599776715040207,
                                          0.023395832628011703, -0.011658374220132828, -0.014656995423138142,
                                          0.010287576355040073, 0.007895269431173801, 0.019243896007537842,
                                          0.01447246503084898, -0.06073690205812454, 0.04286380112171173,
                                          -0.005420583765953779, -0.007519618608057499, -0.010472106747329235,
                                          0.04267927259206772, 0.004445208236575127, -0.009984418749809265,
                                          -0.009233116172254086, 0.016410034149885178, -0.035614389926195145,
                                          -0.007605293300002813, 0.047002557665109634, 0.0014177545672282577,
                                          -0.00829069223254919, -0.015105140395462513, 0.020206091925501823,
                                          0.007644835393875837, 0.010452335700392723, 0.012185604311525822,
                                          0.0015454430831596255, 0.0020430164877325296, 0.010900480672717094,
                                          0.016014613211154938, 0.010452335700392723, -0.04969143122434616,
                                          0.011440891772508621, 0.029498521238565445, 0.037380609661340714,
                                          0.04444549232721329, -0.03166016563773155, -0.039067745208740234,
                                          -0.03358455374836922, 0.0409921370446682, -0.008218198083341122,
                                          0.046211712062358856, 0.012758967466652393, -0.0021319864317774773,
                                          0.012877593748271465, -0.04223112761974335, -0.009878972545266151,
                                          0.007750281598418951, 0.000476978428196162, 0.0040201288647949696,
                                          -0.04818882420659065, 0.027178708463907242, -0.020443344488739967,
                                          -0.01333232969045639, 0.007150557357817888, 0.007084653712809086,
                                          -0.03622070327401161, 0.03250373154878616, 0.03397997468709946,
                                          -0.008936549536883831, -0.017398592084646225, 0.02035108022391796,
                                          -0.08077163994312286, 0.021115563809871674, 0.0035588028840720654,
                                          -0.03629978746175766, 0.0037466285284608603, -0.027205070480704308,
                                          -0.02738960087299347, 0.01677909679710865, 0.0042738583870232105,
                                          0.03693246468901634, -0.0072691841050982475, -0.047767043113708496,
                                          -0.008369777351617813, -0.05182671174407005, 0.005038341972976923,
                                          -0.006455272901803255, -0.004422142170369625, -0.024054870009422302,
                                          0.01489424891769886, 0.0409921370446682, 0.014960152097046375,
                                          -0.007262593600898981, 0.005977470427751541, 0.016765914857387543,
                                          -0.021484624594449997, 0.014261572621762753, 0.02347491681575775,
                                          0.02153734676539898, -0.029419437050819397, -0.028127722442150116,
                                          0.006788086611777544, 0.03266189992427826, 0.021221010014414787,
                                          0.009186983108520508, -0.006596965715289116, -0.014301114715635777,
                                          0.036141619086265564, -0.000996794318780303, 0.01776765286922455,
                                          -0.02889220602810383, -0.03556166589260101, 0.01424839161336422,
                                          0.011262951418757439, -0.03545622155070305, 0.024107594043016434,
                                          0.005229462869465351, -0.030394811183214188, 0.009931695647537708,
                                          -0.011875856667757034, -0.06506018340587616, 0.021062839776277542,
                                          -0.01424839161336422, 0.01151997596025467, 0.009621948003768921,
                                          -0.026427404955029488, 0.00546671636402607, -0.04138755798339844,
                                          -0.01349708903580904, -0.020535610616207123, -0.024951161816716194,
                                          0.008659753017127514, 0.015553286299109459, 0.023923063650727272,
                                          0.021840505301952362, 0.014380199834704399, 0.027995916083455086,
                                          0.03651067987084389, -0.002290155505761504, 0.004649510141462088,
                                          -0.014498826116323471, -0.029973028227686882, 0.0176885686814785,
                                          -0.013180751353502274, 0.0015759235247969627, 0.015474202111363411,
                                          0.015988251194357872, -0.034955352544784546, -0.0016129943542182446,
                                          0.011599061079323292, -0.0038817310705780983, -0.031080210581421852,
                                          0.05815347284078598, 0.00023292857804335654, -0.03516624495387077,
                                          0.0057237409055233, -0.027152346447110176, -0.009246297180652618,
                                          0.03071114979684353, 0.004155231639742851, 0.0013263131259009242,
                                          -0.018057629466056824, -0.007321907207369804, -0.038276899605989456,
                                          0.01522376760840416, -0.020706959068775177, -0.057204458862543106,
                                          0.01132226549088955, -0.0016780743608251214, 0.025939717888832092,
                                          0.009984418749809265, 0.024107594043016434, 0.011618832126259804,
                                          -0.04365464672446251, -0.01177041046321392, 0.004840631037950516,
                                          0.04839971661567688, 0.005618295166641474, 0.0034533566795289516,
                                          0.03382180631160736, -0.006392664276063442, 0.0371960811316967,
                                          0.00695943646132946, -0.010874119587242603, -0.008475222624838352,
                                          0.00018700190412346274, 0.026691021397709846, -0.007908450439572334,
                                          0.028285890817642212, -0.026783285662531853, 0.00600053695961833,
                                          0.012673292309045792, 0.02894493006169796, -0.01027439534664154,
                                          -0.029024014249444008, -0.008310463279485703, -0.05277572572231293,
                                          -0.01977112703025341, 0.015342393890023232, -0.007697558496147394,
                                          -0.020192909985780716, -0.043549202382564545, 0.00992510560899973,
                                          -0.005077884532511234, -0.0030744101386517286, 0.014367018826305866,
                                          0.009872382506728172, 0.02783774584531784, 0.0032358744647353888,
                                          0.0390150249004364, 0.019402066245675087, 0.02641422487795353,
                                          -0.006577194668352604, 0.03250373154878616, -0.0247139073908329,
                                          0.004435322713106871, 0.02159007079899311, -0.017148157581686974,
                                          0.05825892090797424, -0.015895985066890717, -0.003917978145182133,
                                          -0.0013856264995411038, -0.004086032975465059, -0.02659875527024269,
                                          -0.01020849123597145, -0.032371923327445984, 0.017649024724960327,
                                          0.005028456449508667, 0.03076387383043766, 0.02510933019220829,
                                          0.0008666343637742102, -0.017912641167640686, 0.03445448353886604,
                                          -0.03856687620282173, 0.004474864806979895, -0.003384157782420516,
                                          0.009094717912375927, -0.00022324896417558193, -0.031976502388715744,
                                          -0.0004679166595451534, 0.005895090755075216, 0.012983039952814579,
                                          -0.02381761744618416, -0.02731051668524742, -0.00952968280762434,
                                          0.016568204388022423, 0.009345152415335178, -0.002377477940171957,
                                          -0.005446945317089558, -0.009299020282924175, -0.014604272320866585,
                                          -0.029182182624936104, 0.00034125789534300566, 0.0029409551061689854,
                                          0.007717329543083906, 0.007697558496147394, -0.031712885946035385,
                                          0.007888679392635822, -0.00032313435804098845, 0.033848170191049576,
                                          0.024423930794000626, 0.013536631129682064, -0.001978760352358222,
                                          0.024041689932346344, -0.0015306146815419197, -0.02757413126528263,
                                          -0.0044880458153784275, 0.011902217753231525, -0.012956677936017513,
                                          0.06548196822404861, 0.012666701339185238, 0.00262626470066607,
                                          -0.03811873123049736, 0.05952427163720131, -0.03516624495387077,
                                          0.02361990511417389, -0.011763820424675941, 0.002257203683257103,
                                          -0.04415551573038101, 0.0035390316043049097, 0.0024565623607486486,
                                          -0.014683356508612633, 0.04636988043785095, -0.045183613896369934,
                                          -0.0021171581465750933, 0.0015182577772065997, -0.02021927200257778,
                                          0.02947215922176838, 0.008330234326422215, 0.020074283704161644,
                                          -0.002822328358888626, 0.031106572598218918, -0.004102508537471294,
                                          0.0266119372099638, 0.007157147862017155, -0.03513988107442856,
                                          -0.003193036885932088, 0.01284464169293642, 0.00968785211443901,
                                          0.008448861539363861, 0.01697680726647377, 0.0201665498316288,
                                          0.03843507170677185, 0.02023245207965374, -0.019033003598451614,
                                          -0.00862021092325449, 0.03179197013378143, 0.005842368118464947,
                                          0.0006194952875375748, 0.000953956856392324, -0.009971237741410732,
                                          0.0010297461412847042, 0.0019688745960593224, -0.00803366769105196,
                                          0.03139654919505119, 0.008422499522566795, 0.056044552475214005,
                                          -0.015434659086167812, 0.004501226358115673, 0.04320650175213814,
                                          0.04299560934305191, -0.0446300245821476, 0.06015694886445999,
                                          0.02894493006169796, 0.010478696785867214, -0.0659564808011055,
                                          0.007704149000346661, 0.0044583892449736595, -0.0038026466500014067,
                                          0.014380199834704399, 0.02191958948969841, 0.0075327991507947445,
                                          0.005980765912681818, 0.061105962842702866, 0.028127722442150116,
                                          0.03416450694203377, -0.0029607261531054974, 0.0012571141123771667,
                                          0.008165474981069565, 0.043285585939884186, -0.019665680825710297,
                                          -0.005931337829679251, -0.004534178413450718, 0.0029162410646677017,
                                          0.005133902654051781, 0.02796955406665802, 0.01965249888598919,
                                          -0.006507996004074812, 0.015144682489335537, 0.03102748841047287,
                                          0.043549202382564545, -0.003713676705956459, 0.0002143931487808004,
                                          0.026124248281121254, 0.007835956290364265, -0.011948350816965103,
                                          -0.030025750398635864, 0.017398592084646225, -0.030842958018183708,
                                          0.004992209374904633, 0.04963870719075203, -0.005035046953707933,
                                          -0.006270742509514093, -0.000589838600717485, -0.034243591129779816,
                                          0.004290334414690733, 0.0026674545370042324, 0.0034335856325924397,
                                          0.002492809435352683, -0.01190880872309208, 0.017385410144925117,
                                          0.01456473022699356, -0.027495047077536583, -0.010953203774988651,
                                          -0.0019771126098930836, 0.024990703910589218, 0.04091305285692215,
                                          -0.02400214783847332, 0.03361091390252113, -0.006254266481846571,
                                          -0.006919894367456436, -0.0323982872068882, 0.00014385553367901593,
                                          0.027732299640774727, 0.01677909679710865, 0.05462103337049484,
                                          0.00665298430249095, -0.010129407048225403, 0.02583427168428898,
                                          -0.0021451672073453665, 0.006679345387965441, -0.0004036604950670153,
                                          0.009648310020565987, 0.006138934753835201, 0.006906713359057903,
                                          -0.038725048303604126, 0.00513719767332077, -0.03492898866534233,
                                          0.0434701181948185, -0.016014613211154938, 0.02952488139271736,
                                          0.010478696785867214, 0.026163790374994278, 0.03018392063677311,
                                          -2.4939165541582042e-06, 0.04884786158800125, -0.024489834904670715,
                                          0.02492479979991913, 0.03701154887676239, -0.0013963357778266072,
                                          0.015065598301589489, -0.014960152097046375, -0.03266189992427826,
                                          -0.026638297364115715, -0.0446300245821476, -0.013628896325826645,
                                          0.006873761769384146, 0.027626853436231613, -0.003927863668650389,
                                          -0.017925821244716644, 0.012666701339185238, 0.009984418749809265,
                                          0.00621142890304327, -0.008626801893115044, -0.02783774584531784,
                                          0.029973028227686882, 0.037881478667259216, -0.002616379177197814,
                                          -0.021431900560855865, -0.003100771689787507, 0.015988251194357872,
                                          0.02360672503709793, 0.00578964501619339, 0.0045473589561879635,
                                          0.031449273228645325, -0.04001675918698311, -0.017477676272392273,
                                          0.007150557357817888, 0.03063206560909748, -0.023778075352311134,
                                          -0.005282185971736908, -0.02193276956677437, -0.015052417293190956,
                                          0.0034302903804928064, -0.003077705390751362, 0.0100832749158144,
                                          -0.0027663102373480797, -0.008429090492427349, 0.01177041046321392,
                                          -0.0068144481629133224, 0.0031353712547570467, 0.043021973222494125,
                                          -0.02485889568924904, 0.007994125597178936, -0.0029640214052051306,
                                          0.010748902335762978, -0.004158527124673128, -0.030421173200011253,
                                          0.01069617923349142, -0.024674365296959877, -0.02147144265472889,
                                          -0.016765914857387543, -0.03071114979684353, 0.015711454674601555,
                                          -0.006992388516664505, -0.022130481898784637, 0.03861960023641586,
                                          -0.016620926558971405, 0.003848779248073697, -0.007064882665872574,
                                          0.022974049672484398, 0.04766159504652023, 0.025742007419466972,
                                          0.012561256065964699, -0.0062476759776473045, -0.057415351271629333,
                                          0.0023362881038337946, -0.026045164093375206, 0.0030414583161473274,
                                          -0.03513988107442856, 0.0023132218047976494, 0.0403330996632576,
                                          0.030658427625894547, -0.016858180984854698, 0.014722898602485657,
                                          0.008165474981069565, 0.002099034609273076, 0.027495047077536583,
                                          -0.0037268572486937046, 0.0143406568095088, -0.02757413126528263,
                                          0.005572162568569183, 0.0008773437584750354, -0.03579891845583916,
                                          0.009088127873837948, -0.0009819659171625972, 0.02634832076728344,
                                          -0.007631654851138592, -0.013997958041727543, 0.04663349688053131,
                                          -0.02517523430287838, -0.0005025161080993712, 0.01151338592171669,
                                          -0.039252277463674545, -0.009799888357520103, 0.01659456640481949,
                                          -0.002079263562336564, -0.00040777947288006544, 0.0225654449313879,
                                          -0.03759150207042694, 0.004909829702228308, -0.010023960843682289,
                                          0.014946972019970417, 0.01567191258072853, 0.004039900377392769,
                                          -0.01965249888598919, -0.006567309144884348, -0.006972617469727993,
                                          0.03018392063677311, 0.07581567764282227, -0.0018766093999147415,
                                          0.0027646624948829412, -0.008580668829381466, 0.022868603467941284,
                                          -0.02238091453909874, 0.0004563835100270808, 0.03458629176020622,
                                          0.027995916083455086, 0.031106572598218918, -0.005671018268913031,
                                          -0.01905936561524868, 0.0017794014420360327, -0.020799225196242332,
                                          0.005483192391693592, -0.006125754211097956, -0.036853380501270294,
                                          -0.03506079688668251, -0.010544600896537304, -0.020469706505537033,
                                          0.021893227472901344, -0.001147549133747816, 0.01575099676847458,
                                          0.018242159858345985, -0.019217535853385925, 0.013035763055086136,
                                          0.00027247084653936327, -0.005710560362786055, 0.00784254726022482,
                                          -0.022473180666565895, 0.016344131901860237, 0.01925707794725895,
                                          0.025847453624010086, -0.00136585533618927, 0.031844694167375565,
                                          -0.012574436143040657, -0.027231432497501373, -0.021510986611247063,
                                          0.0027646624948829412, 0.019810669124126434, -0.014011138118803501,
                                          -0.04737161844968796, -0.025597019121050835, -0.03426995128393173,
                                          0.015026056207716465, 0.014498826116323471, -0.021102381870150566,
                                          0.026453766971826553, 0.008040257729589939, -0.007618474308401346,
                                          -0.01626504585146904, -0.0122317373752594, 0.016278227791190147,
                                          0.013576173223555088, 0.007071472704410553, -0.0010989451548084617,
                                          0.011374988593161106, -0.02894493006169796, -0.0007727215415798128,
                                          0.010498467832803726, -0.006191657856106758, 0.01267988234758377,
                                          -0.023171760141849518, -0.03455992788076401, 0.012455809861421585,
                                          0.008719067089259624, -0.023857159540057182, 0.024173498153686523,
                                          -0.0002914181677624583, -0.006399254780262709, -0.014525187201797962,
                                          0.020377440378069878, -0.021418720483779907, 0.000800730602350086,
                                          0.021695517003536224, -0.0010313937673345208, 0.0048307450488209724,
                                          0.010445745661854744, 0.018004905432462692, -0.056044552475214005,
                                          -0.02907673642039299, -0.009279248304665089, 0.0006479162839241326,
                                          0.00995146669447422, 0.011539747938513756, -0.014722898602485657,
                                          -0.00809957180172205, 0.01730632595717907, 0.022420456632971764,
                                          0.02783774584531784, 0.0012307526776567101, 0.02159007079899311,
                                          -0.0018123532645404339, 0.02466118521988392, 0.022420456632971764,
                                          0.0007315317052416503, 0.0012118052691221237, -0.0014490587636828423,
                                          -0.037248801440000534, 0.0065211765468120575, -0.02127373218536377,
                                          -0.027995916083455086, 0.018835293129086494, 0.02172187715768814,
                                          -0.005051522981375456, 0.032371923327445984, 0.013325739651918411,
                                          0.024358028545975685, 0.005657837260514498, -0.029946666210889816,
                                          0.023791255429387093, -0.04299560934305191, 0.015526924282312393,
                                          -0.010880709625780582, -0.022486360743641853, 0.005166854243725538,
                                          0.024437112733721733, -0.03922591358423233, 0.03231920301914215,
                                          0.026836009696125984, 0.019744765013456345, 0.019929295405745506,
                                          0.01476244069635868, -0.01782037504017353, 0.025201596319675446,
                                          -0.001677250606007874, 0.036537040024995804, -0.027943192049860954,
                                          0.0034237001091241837, 0.03627342730760574, -0.059946056455373764,
                                          0.027732299640774727, 0.038145095109939575, 0.010432564653456211,
                                          -0.01525012869387865, 0.0023346405941993, 0.008653162978589535,
                                          -0.0373542495071888, -0.0012216909090057015, -0.015276490710675716,
                                          -0.0323982872068882, 0.04207295551896095, 0.00588520523160696,
                                          -0.009832840412855148, 0.0007801356841810048, -0.03292551636695862,
                                          -0.021128743886947632, -0.03590436652302742, -0.010010780766606331,
                                          0.02854950726032257, -0.03492898866534233, -0.016805456951260567,
                                          -0.042310211807489395, 0.004860402084887028, 0.031001126393675804,
                                          0.007743691094219685, -0.006066440604627132, 0.02836497686803341,
                                          -0.045948099344968796, -0.004346352536231279, 0.022130481898784637,
                                          0.027099624276161194, -0.003891616826876998, -0.012449218891561031,
                                          0.0226445309817791, 0.028022276237607002, -0.026242874562740326,
                                          0.009147441014647484, 0.027178708463907242, 0.001011622603982687,
                                          -0.004873582627624273, 0.006649688817560673, -0.007915041409432888,
                                          0.0019425131613388658, 0.0013510269345715642, -0.0013123084791004658,
                                          -0.025926537811756134, 0.009424236603081226, -0.0007014630828052759,
                                          -0.007111015263944864, -0.0247139073908329, 0.0183476060628891,
                                          -0.011796772480010986, 0.027547769248485565, 0.024081232026219368,
                                          -0.01281828060746193, -0.02744232304394245, -0.010313937440514565,
                                          -0.012396496720612049, -0.033400021493434906, -0.017794013023376465,
                                          -0.0086795249953866, 0.012897364795207977, 0.04286380112171173,
                                          0.0011434301268309355, 0.015105140395462513, -0.0016863123746588826,
                                          0.022802699357271194, 0.003125485498458147, -0.011651784181594849,
                                          -0.020904671400785446, -0.0075525701977312565, -0.019072547554969788,
                                          0.031581077724695206, -0.027231432497501373, 0.001965579576790333,
                                          0.0034105193335562944, 0.025873813778162003, -0.009186983108520508,
                                          -0.0143406568095088, 0.03210831061005592, 0.004122280050069094,
                                          -0.03732788562774658, -0.03258281573653221, -0.005941223353147507,
                                          -0.019929295405745506, -0.0045275879092514515, 0.03316276893019676,
                                          -0.005598524119704962, -0.026361502707004547, -0.008323644287884235,
                                          -0.03869868442416191, -0.024147136136889458, -0.06068417802453041,
                                          -0.009490140713751316, 0.0038685505278408527, -0.0021253961604088545,
                                          0.002733358182013035, -0.04911147803068161, -0.01118386723101139,
                                          -0.003901502350345254, 0.011104783043265343, 0.025715645402669907,
                                          -0.02854950726032257, -0.012620569206774235, 0.03160744160413742,
                                          -0.01456473022699356, 0.018888017162680626, -0.0052360533736646175,
                                          0.001189562724903226, -0.0044682747684419155, 0.0011945056030526757,
                                          0.014946972019970417, -0.007130786310881376, -0.01684499904513359,
                                          0.0064717489294707775, 0.013589354231953621, 0.0023280500900000334,
                                          -0.03885685279965401, -0.013800246641039848, -0.051352206617593765,
                                          -0.0075723412446677685, 0.042652908712625504, -0.029683051630854607,
                                          0.028523145243525505, -0.013576173223555088, -0.03368999809026718,
                                          -0.019692042842507362, 0.01060391403734684, -0.01531603280454874,
                                          -0.02021927200257778, -0.023119037970900536, 0.013536631129682064,
                                          0.018044447526335716, 0.00010070917778648436, 0.001483658328652382,
                                          0.014129765331745148, 0.0008929958567023277, -0.0019260372500866652,
                                          -0.0009745517745614052, 0.00809957180172205, -0.0029689641669392586,
                                          -0.0008600440341979265, 0.01750403828918934, -0.016344131901860237,
                                          0.024964341893792152, 0.031132934615015984, -0.00297720218077302,
                                          0.016423216089606285, 0.0019425131613388658, -0.02178778126835823,
                                          0.03166016563773155, -0.023145398125052452, -0.015210586600005627,
                                          -0.0026921683456748724, 0.009411056526005268, 0.04568448290228844,
                                          0.003911387640982866, -0.00894972961395979, -0.024292124435305595,
                                          -0.004415551666170359, -0.011427710764110088, 0.0016286465106531978,
                                          0.027547769248485565, 0.03550894185900688, 0.022288650274276733,
                                          0.004191478714346886, 0.027046900242567062, 0.016555022448301315,
                                          -0.00508777005597949, -9.061766468221322e-05, -0.006966026965528727,
                                          0.011730868369340897, 0.012699653394520283, 0.025135692209005356,
                                          0.07038521021604538, 0.003571983426809311, 0.00723623251542449,
                                          0.018782570958137512, 0.016607746481895447, 0.010458925738930702,
                                          0.017200879752635956, -0.02836497686803341, -0.0223150122910738,
                                          -0.013411413878202438, -0.024371208623051643, 0.0027778432704508305,
                                          -0.0005358799244277179, -0.030104834586381912, 0.015909167006611824,
                                          -0.010570961982011795, -0.016080515459179878, 0.01646275818347931,
                                          -0.0265328511595726, -0.018268520012497902, -0.004211249761283398,
                                          0.004817564506083727, -0.03941044583916664, 0.023791255429387093,
                                          -0.010538010857999325, 0.010228263214230537, 0.022143661975860596,
                                          -0.014525187201797962, -0.01912526972591877, -0.000570067495573312,
                                          -0.019757945090532303, -0.011539747938513756, 0.01880893111228943,
                                          0.007625064346939325, -0.008152294903993607, -0.003336377674713731,
                                          -0.0335581935942173, 0.014933791011571884, -0.004972438327968121,
                                          -0.03374272212386131, 0.014788802713155746, -0.01912526972591877,
                                          -7.048612314974889e-05, -0.00021418721007648855, 0.02841769903898239,
                                          0.02211729995906353, 0.014696537517011166, 0.047187089920043945,
                                          0.000748007616493851, -0.005605114158242941, 0.03843507170677185,
                                          0.027626853436231613, -0.05583366006612778, 0.003545622108504176,
                                          0.030473897233605385, -0.013207112438976765, -0.015276490710675716,
                                          0.0018518954748287797, -0.011954940855503082, -0.0018584858626127243,
                                          0.04460366070270538, -0.048241548240184784, -0.00443861773237586,
                                          0.026980997994542122, -0.012225146405398846, -0.014380199834704399,
                                          0.007789823692291975, -0.001960636815056205, -0.01664728857576847,
                                          -0.008152294903993607, -0.0035686884075403214, 0.000288122973870486,
                                          0.00434305751696229, -0.01626504585146904, -0.018110351637005806,
                                          -0.005180035252124071, -0.015540105290710926, -0.03152835741639137,
                                          -0.009312200360000134, -0.017095433548092842, -0.030473897233605385,
                                          -0.01323347445577383, -0.00557875307276845, -0.022657711058855057]
        }

        self.apartments = [
            {
                "ID": 11,
                "Link": "https://www.wg-gesucht.de/wg-zimmer-in-Berlin-Kreuzberg.11072022.html",
                "Ort": "Kreuzberg",
                "Stra√üe": "Gneisenaustra√üe 10",
                "PLZ": "10961",
                "Zimmergr√∂√üe": "25m¬≤",
                "Gesamtmiete": "690‚Ç¨",
                "Miete": "600‚Ç¨",
                "Nebenkosten": "90‚Ç¨",
                "Sonstige Kosten": "n.a.",
                "Kaution": "700‚Ç¨",
                "Abl√∂severeinbarung": "n.a.",
                "frei ab": "2023-11-01",
                "frei bis": None,
                "Anzeige Datum": "2024-06-21 19:47:23",
                "features": [
                    "Altbau", "2. OG", "m√∂bliert", "Badewanne", "Parkett",
                    "Zentralheizung", "Bewohnerparken", "5 Minuten zu Fu√ü entfernt",
                    "Waschmaschine", "pet-friendly", "viel nat√ºrliches Licht"
                ],
                "tab_contents": [
                    "Dein sonniges Zimmer befindet sich in einer voll m√∂blierten Altbauwohnung in Berlin-Kreuzberg. Vor dem Haus h√§lt die U-Bahnlinie 7. Es gibt ein Bad, eine K√ºche mit K√ºhlschrank, Waschmaschine und Flur. 10 Minuten sind es bis zum Alexanderplatz. Vereinbare einen Termin mit Natalie und Jo und sende uns Deinen Einkommensnachweis per whatsapp (siehe Kontaktinformationen).",
                    "U-Bahnhof Gneisenaustra√üe",
                    "Wir sprechen Deutsch und Englisch."
                ],
                "Wohnungsgr√∂√üe": "90",
                "WG_groesse": "3",
                "Mitbewohnern_Geschlecht": "Egal",
                "WG_Art": ["Studenten-WG", "Berufst√§tigen-WG"],
                "Gesuchte_Geschlecht": "Egal",
                "Gesuchte_Alter": [20, 35],
                "Mitbewohner_Alter": [20, 35],
                "smoking": True
            },
            {
                "ID": 12,
                "Link": "https://www.wg-gesucht.de/wg-zimmer-in-Berlin-Neukoelln.11073450.html",
                "Ort": "Neuk√∂lln",
                "Stra√üe": "Sonnenallee 101",
                "PLZ": "12045",
                "Zimmergr√∂√üe": "22m¬≤",
                "Gesamtmiete": "700‚Ç¨",
                "Miete": "620‚Ç¨",
                "Nebenkosten": "80‚Ç¨",
                "Sonstige Kosten": "n.a.",
                "Kaution": "700‚Ç¨",
                "Abl√∂severeinbarung": "n.a.",
                "frei ab": "2023-11-01",
                "frei bis": None,
                "Anzeige Datum": "2024-06-21 19:47:40",
                "features": [
                    "Altbau", "1. OG", "m√∂bliert", "Dusche", "Parkett",
                    "Zentralheizung", "Bewohnerparken", "3 Minuten zu Fu√ü entfernt",
                    "Waschmaschine", "viel nat√ºrliches Licht"
                ],
                "tab_contents": [
                    "Das sonnige Zimmer befindet sich in einer voll m√∂blierten Altbauwohnung in Berlin-Neuk√∂lln. Vor dem Haus h√§lt die U-Bahnlinie 8. Es gibt ein Bad, eine K√ºche mit K√ºhlschrank, Waschmaschine und Flur. 15 Minuten sind es bis zum Alexanderplatz. Vereinbare einen Termin mit Alex und Maria und sende uns Deinen Einkommensnachweis per whatsapp (siehe Kontaktinformationen).",
                    "U-Bahnhof Hermannplatz",
                    "Wir sprechen Deutsch, Englisch und Franz√∂sisch."
                ],
                "Wohnungsgr√∂√üe": "85",
                "WG_groesse": "3",
                "Mitbewohnern_Geschlecht": "Egal",
                "WG_Art": ["Studenten-WG", "Berufst√§tigen-WG"],
                "Gesuchte_Geschlecht": "Egal",
                "Gesuchte_Alter": [20, 35],
                "Mitbewohner_Alter": [20, 30],
                "smoking": True
            }
        ]

    def test_filter_apartments(self):
        user = turn_user_to_user_model(self.user_data)
        expected_output = {
            'fitting_apartments': [
                {
                    "ID": 11,
                    "Link": "https://www.wg-gesucht.de/wg-zimmer-in-Berlin-Kreuzberg.11072022.html",
                    "Ort": "Kreuzberg",
                    "Stra√üe": "Gneisenaustra√üe 10",
                    "PLZ": "10961",
                    "Zimmergr√∂√üe": "25m¬≤",
                    "Gesamtmiete": "690‚Ç¨",
                    "Miete": "600‚Ç¨",
                    "Nebenkosten": "90‚Ç¨",
                    "Sonstige Kosten": "n.a.",
                    "Kaution": "700‚Ç¨",
                    "Abl√∂severeinbarung": "n.a.",
                    "frei ab": "2023-11-01",
                    "frei bis": None,
                    "Anzeige Datum": "2024-06-21 19:47:23",
                    "features": [
                        "Altbau", "2. OG", "m√∂bliert", "Badewanne", "Parkett",
                        "Zentralheizung", "Bewohnerparken", "5 Minuten zu Fu√ü entfernt",
                        "Waschmaschine", "pet-friendly", "viel nat√ºrliches Licht"
                    ],
                    "tab_contents": [
                        "Dein sonniges Zimmer befindet sich in einer voll m√∂blierten Altbauwohnung in Berlin-Kreuzberg. Vor dem Haus h√§lt die U-Bahnlinie 7. Es gibt ein Bad, eine K√ºche mit K√ºhlschrank, Waschmaschine und Flur. 10 Minuten sind es bis zum Alexanderplatz. Vereinbare einen Termin mit Natalie und Jo und sende uns Deinen Einkommensnachweis per whatsapp (siehe Kontaktinformationen).",
                        "U-Bahnhof Gneisenaustra√üe",
                        "Wir sprechen Deutsch und Englisch."
                    ],
                    "Wohnungsgr√∂√üe": "90",
                    "WG_groesse": "3",
                    "Mitbewohnern_Geschlecht": "Egal",
                    "WG_Art": ["Studenten-WG", "Berufst√§tigen-WG"],
                    "Gesuchte_Geschlecht": "Egal",
                    "Gesuchte_Alter": [20, 35],
                    "Mitbewohner_Alter": [20, 35],
                    "smoking": True
                },
                {
                    "ID": 12,
                    "Link": "https://www.wg-gesucht.de/wg-zimmer-in-Berlin-Neukoelln.11073450.html",
                    "Ort": "Neuk√∂lln",
                    "Stra√üe": "Sonnenallee 101",
                    "PLZ": "12045",
                    "Zimmergr√∂√üe": "22m¬≤",
                    "Gesamtmiete": "700‚Ç¨",
                    "Miete": "620‚Ç¨",
                    "Nebenkosten": "80‚Ç¨",
                    "Sonstige Kosten": "n.a.",
                    "Kaution": "700‚Ç¨",
                    "Abl√∂severeinbarung": "n.a.",
                    "frei ab": "2023-11-01",
                    "frei bis": None,
                    "Anzeige Datum": "2024-06-21 19:47:40",
                    "features": [
                        "Altbau", "1. OG", "m√∂bliert", "Dusche", "Parkett",
                        "Zentralheizung", "Bewohnerparken", "3 Minuten zu Fu√ü entfernt",
                        "Waschmaschine", "viel nat√ºrliches Licht"
                    ],
                    "tab_contents": [
                        "Das sonnige Zimmer befindet sich in einer voll m√∂blierten Altbauwohnung in Berlin-Neuk√∂lln. Vor dem Haus h√§lt die U-Bahnlinie 8. Es gibt ein Bad, eine K√ºche mit K√ºhlschrank, Waschmaschine und Flur. 15 Minuten sind es bis zum Alexanderplatz. Vereinbare einen Termin mit Alex und Maria und sende uns Deinen Einkommensnachweis per whatsapp (siehe Kontaktinformationen).",
                        "U-Bahnhof Hermannplatz",
                        "Wir sprechen Deutsch, Englisch und Franz√∂sisch."
                    ],
                    "Wohnungsgr√∂√üe": "85",
                    "WG_groesse": "3",
                    "Mitbewohnern_Geschlecht": "Egal",
                    "WG_Art": ["Studenten-WG", "Berufst√§tigen-WG"],
                    "Gesuchte_Geschlecht": "Egal",
                    "Gesuchte_Alter": [20, 35],
                    "Mitbewohner_Alter": [20, 30],
                    "smoking": True
                }
            ]
        }

        filtered_apartments = filter_apartments(user, self.apartments)
        self.assertEqual(filtered_apartments, expected_output)

if __name__ == '__main__':
    unittest.main()
